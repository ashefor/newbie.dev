<app-navbar></app-navbar>
<div class="section">
  <div class="post_wrapper">
    <div class="" *ngIf="showpost">
      <div class="">
        <div class="postCard">
          <div class="field p_a">
            <div class="media">
              <div class="media-left">
                <figure class="image is-48x48">
                  <img src="https://bulma.io/images/placeholders/48x48.png" alt="Placeholder image" class="is-rounded">
                </figure>
              </div>
              <div class="media-content author-name-time is-flex-desktop">
                <p class="title is-size-6 has-text-weight-normal">{{post.author}}</p>
                <p>·</p>
                <p class="subtitle is-size-6 has-text-weight-normal" title="{{post.date | date}}">
                  {{post.date | timeAgo }}</p>
                <p>·</p>
                <p class="subtitle is-size-6 has-text-weight-normal">{{result}} min read </p>
              </div>
              <div class="media-right">
                <div class="edit_del_btns">
                  <a class="actionBtn edit_icon" title="Edit" [routerLink]="['/posts', post._id, 'edit']">
                    <img src="../../../../assets/edit.png" alt="edit">
                  </a>
                  <a class="actionBtn" (click)="deleteThisPost(post)" title="Delete">
                    <img src="../../../../assets/trash.png" alt="delete">
                  </a>
                </div>
              </div>
            </div>
          </div>
          <div class="field p_t">
            <p class="title is-size-2 has-text-weight-normal">
              {{post.title}}
            </p>
            <div class="tags">
              <span class="tag" *ngFor="let tags of alltags">
                {{tags}}
              </span>
            </div>
          </div>
          <div class="body-text content">
            <div class="content texttrunc is-size-5 has-text-justified" [innerHTML]="post.content" #postBody>
            </div>
            <div class="field has-text-left-mobile has-text-right">
              <a class="button is-rounded like_btn" (click)="likePost(post._id)" [style.border-color]="hasLikedThis"
                [style.background]="hasLikedThis2">
                <div class="image is-small">
                  <img src="../../../../assets/thumbs.png" alt="like post" srcset="">
                </div>
                <span *ngIf="nooflikes !== 0">
                  {{nooflikes}}
                </span>
              </a>
            </div>
          </div>
        </div>
        <div class="about_author">
          <div class="media">
            <figure class="media-left">
              <p class="image is-128x128">
                <img src="https://bulma.io/images/placeholders/128x128.png" class=" is-rounded">
              </p>
            </figure>
            <div class="media-content">
              <div class="content">
                <h3 class=" is-size-4">
                  <strong>John Smith</strong>
                </h3>
                <div class="author_content">
                  <p>
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin ornare magna eros, eu pellentesque
                    tortor vestibulum ut. Maecenas non massa sem. Etiam finibus odio quis feugiat facilisis.
                    sectetur adipiscing elit. Proin ornare magna eros, eu pellentesque tortor vestibulum ut. Maecenas
                    non massa sem. Etiam finibus odio quis feugiat facilisis.
                  </p>
                </div>
              </div>
              <div class="level is-mobile">
                <div class="level-left">
                  <a class="level-item">
                    <button class="follow-btn">
                      <span class="icon is-small"><i class="fas fa-user-plus"></i></span>
                      <span>
                        follow
                      </span>
                    </button>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
        <hr>
        <div class="">
          <a class="button is-primary is-outlined is-fullwidth is-medium" (click)="toggleComment()">
            <p *ngIf="addComment">
              I change my mind
            </p>
            <p *ngIf="!addComment">
              Add a comment
            </p>
          </a>
          <app-create-comment [postId]="post._id" *ngIf="addComment" (saveNewComment)="saveNewComment($event)">
          </app-create-comment>
        </div>
        <app-comments-list [postId]="post._id" [comments]="post.comments"></app-comments-list>
      </div>
    </div>
  </div>
</div>